<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FREE FIRE AR PRO - FINAL</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Oswald', sans-serif; user-select: none; background: #000; }
        
        /* ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶≤‡¶¨‡¶ø ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏ */
        #pro-lobby {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.8)), url('https://wallpaperaccess.com/full/1155013.jpg');
            background-size: cover; z-index: 1000; display: flex; flex-direction: column; align-items: flex-end; padding: 20px; box-sizing: border-box;
        }

        .friend-list {
            width: 200px; background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(255, 215, 0, 0.4);
            border-radius: 5px; padding: 10px; display: flex; flex-direction: column; gap: 8px;
        }

        .friend-slot {
            height: 45px; background: rgba(255, 255, 255, 0.1); border-radius: 3px;
            display: flex; align-items: center; justify-content: space-between; padding: 0 10px; color: white; font-size: 14px;
        }

        .invite-plus { background: #ffcc00; color: black; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; }

        .bottom-bar { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; }
        
        .start-btn {
            width: 220px; height: 60px; background: #ffcc00; border: none; font-size: 26px; font-weight: bold;
            color: #000; clip-path: polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%); cursor: pointer;
            box-shadow: 0 0 20px #ffcc00; text-transform: uppercase;
        }

        /* ‡¶á‡¶®-‡¶ó‡ßá‡¶Æ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ */
        #game-controls { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: none; z-index: 100; }
        .circle-btn {
            position: absolute; pointer-events: auto; width: 70px; height: 70px; border-radius: 50%;
            border: 3px solid #fff; display: flex; align-items: center; justify-content: center; color: white;
            font-weight: bold; text-shadow: 1px 1px black;
        }
        .f-btn { right: 5%; bottom: 15%; background: rgba(255, 0, 0, 0.6); font-size: 30px; display: none; }
        .a-btn { left: 50%; bottom: 10%; transform: translateX(-50%); background: rgba(0, 150, 255, 0.6); }
        .m-btn { left: 20px; top: 20px; width: 50px; height: 50px; background: rgba(0,0,0,0.5); }
        .hp-box { position: absolute; top: 20px; right: 20px; color: white; background: rgba(0,0,0,0.7); padding: 5px 15px; border-radius: 3px; border-left: 5px solid #ffcc00; }
    </style>
</head>

<body>

    <div id="pro-lobby">
        <div style="color: gold; font-size: 12px; margin-bottom: 5px;">ONLINE FRIENDS</div>
        <div class="friend-list">
            <div class="friend-slot"><span>üë§ You</span> <span style="color: #00ff00;">‚óè</span></div>
            <div class="friend-slot" onclick="invite()"><span>Empty</span> <span class="invite-plus">+</span></div>
            <div class="friend-slot" onclick="invite()"><span>Empty</span> <span class="invite-plus">+</span></div>
            <div class="friend-slot" onclick="invite()"><span>Empty</span> <span class="invite-plus">+</span></div>
        </div>

        <div class="bottom-bar">
            <button class="start-btn" onclick="goLive()">START</button>
            <p style="color: white; font-size: 12px; margin-top: 10px; opacity: 0.7;">BATTLE ROYALE - AR MODE</p>
        </div>
    </div>

    <div id="game-controls">
        <div class="circle-btn m-btn" id="mic-node" onclick="micToggle()">üé§</div>
        <div class="circle-btn a-btn" onclick="skillActive()">ALOK</div>
        <div class="circle-btn f-btn" id="fire-node" onclick="shoot()">üî•</div>
        <div class="hp-box">HP: <span id="hp-txt">200</span></div>
        <div id="loot-tip" style="position: fixed; top: 25%; width: 100%; text-align: center; color: #ffcc00; font-size: 20px; font-weight: bold;">TAP THE WEAPON ON GROUND!</div>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
        <a-assets>
            <a-asset-item id="charModel" src="https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/ready-player-me/model.gltf"></a-asset-item>
            <a-asset-item id="gunModel" src="https://vazxmixjsiawhamofees.supabase.co/storage/v1/object/public/models/m16/model.gltf"></a-asset-item>
        </a-assets>

        <a-entity camera>
            <a-entity id="gun-hand" gltf-model="#gunModel" position="0.3 -0.4 -0.6" rotation="0 180 0" scale="0.12 0.12 0.12" visible="false"></a-entity>
            <a-ring id="aura" color="cyan" rotation="-90 0 0" radius-inner="1.5" radius-outer="1.7" position="0 -1.5 0" visible="false"></a-ring>
            <a-cursor color="yellow" scale="0.5 0.5 0.5"></a-cursor>
        </a-entity>

        <a-entity id="loot-item" gltf-model="#gunModel" position="1.2 -1 -3.5" rotation="0 45 0" scale="0.1 0.1 0.1" onclick="takeLoot()">
            <a-text value="PICK UP" align="center" position="0 1.2 0" color="gold"></a-text>
        </a-entity>

        <a-entity id="lobby-model" gltf-model="#charModel" position="0 -1 -3" scale="1.6 1.6 1.6"></a-entity>
    </a-scene>

    <script>
        let health = 200;
        let micStatus = false;

        function invite() {
            const link = window.location.href;
            navigator.clipboard.writeText(link);
            alert("Lobby Link Copied! Send it to your friends.");
        }

        function goLive() {
            document.getElementById('pro-lobby').style.display = 'none';
            document.getElementById('game-controls').style.display = 'block';
            setTimeout(() => { document.getElementById('loot-tip').style.display = 'none'; }, 5000);
        }

        async function micToggle() {
            const m = document.getElementById('mic-node');
            if(!micStatus) {
                try {
                    await navigator.mediaDevices.getUserMedia({ audio: true });
                    micStatus = true;
                    m.style.background = "#00ff00";
                } catch(e) { alert("Mic Permission Denied!"); }
            } else {
                micStatus = false;
                m.style.background = "rgba(0,0,0,0.5)";
            }
        }

        function takeLoot() {
            document.getElementById('loot-item').setAttribute('visible', 'false');
            document.getElementById('gun-hand').setAttribute('visible', 'true');
            document.getElementById('fire-node').style.display = 'flex';
            alert("M16 Equipped!");
        }

        function skillActive() {
            const ring = document.getElementById('aura');
            ring.setAttribute('visible', 'true');
            let h = setInterval(() => {
                if(health < 200) { health += 2; document.getElementById('hp-txt').innerText = health; }
            }, 1000);
            setTimeout(() => { ring.setAttribute('visible', 'false'); clearInterval(h); }, 6000);
        }

        function shoot() {
            const g = document.getElementById('gun-hand');
            g.setAttribute('animation', 'property: position; to: 0.3 -0.4 -0.55; dur: 50; dir: alternate; loop: 1');
        }
    </script>
</body>
</html>
